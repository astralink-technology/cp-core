define("utils/validationUtils",[],function(){var e=function(e,t,n,r){if(!e){var i="Required";return n&&(i=n),r?r(i):($("#"+t).html(i),$("#"+t).show()),!1}return $("#"+t).hide(),!0},t=function(e,t,n,r,i,s,o){var u="Required",a="Does not match";return s&&!e?(o&&(u=o),i?i(u):($("#"+n).html(u),$("#"+n).show()),!1):e!=t?(r&&(a=r),i?i(a):($("#"+n).html(a),$("#"+n).show()),!1):($("#"+n).hide(),!0)},n=function(e,t,n,r,i,s){var o="Required",u="Invalid Email",a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i&&!e?(s&&(o=s),r?r(o):($("#"+t).html(o),$("#"+t).show()),!1):a.test(e)?($("#"+t).hide(),!0):(n&&(u=n),r?r(u):($("#"+t).html(u),$("#"+t).show()),!1)};return{validateRequired:e,validateMatch:t,validateEmail:n}}),define("core/ajaxLoader",["bootstrap"],function(e){var t=null,n={init:function(e){var r=this,i=$.extend({prefix:"",title:"Loading",text:"",timeout:12e4,finishLoading:function(e){}},e);t=i;var s=$(r);s.html(['<div class="modal fade modal-ajaxloader" id="modalAjaxLoader'+i.prefix+'" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="modalAjaxLoader'+i.prefix+'Label" aria-hidden="true">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<h4 class="modal-title" id="modalAjaxLoaderLabel'+i.prefix+'">'+t.title+"</h4>","</div>",'<div class="modal-body">','<div class="full-block">','<span><img src="/img/ajax-loader.gif" /> </span><span id="modalAjaxLoaderText'+i.prefix+'"></span>',"</div>","</div>","</div>","</div>","</div>"].join("")),i.text&&$("#modalAjaxLoaderText"+i.prefix).text(i.text),$("#modalAjaxLoader"+i.prefix).modal(),setTimeout(function(){n._closeAjaxLoader(i.prefix)},i.timeout)},_closeAjaxLoader:function(e){$("#modalAjaxLoader"+e).modal("hide")},finishLoading:function(e){n._closeAjaxLoader(e)}};$.fn.ajaxLoader=function(e){if(n[e])return n[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return n.init.apply(this,arguments);$.error("Method "+method+" does not exist"),$(element).load(function(){})}}),require.config({paths:{bootstrap:["/cp-front/js/bootstrap-3.0.2/js/bootstrap.min"],core:"/cp-front/js/custom/core",utils:"/cp-front/js/utils"}}),require(["utils/validationUtils","core/ajaxLoader"],function(e,t){function n(){var t=$("#tb-username").val(),n=$("#tb-password").val(),r=e.validateEmail(t,"val-loginUsername","Please enter a valid username",null,!0,"Please enter a username"),i=e.validateRequired(n,"val-loginPassword","Please enter a password");if(!r||!i)return;var s=new Object;s.Username=t,s.Password=n;var o=JSON.stringify(s);$.ajax({type:"POST",url:_apiHost+"/account/login",processData:!0,data:{json:o},beforeSend:function(){$("#modalAjaxLoader").ajaxLoader({prefix:"logInLoading",title:"Log In",text:"Sigining in..."})},dataType:"json",success:function(e){e.error?($("#login-error").text(e.errorDesc),$("#login-error").show(),$("#modalAjaxLoader").ajaxLoader("finishLoading","logInLoading")):window.location="/"},error:function(e){}})}$(document).ready(function(){$("#tb-username").focus(),$("#btn-login").click(function(){n()}),$(window).bind("keypress",function(e){e.keyCode==13&&n()})})}),define("login",function(){});